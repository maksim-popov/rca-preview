(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{234:function(e,t,a){e.exports=a(450)},239:function(e,t,a){},240:function(e,t,a){},450:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(10),o=a.n(c),l=(a(239),a(240),a(86)),s=a(68),u=a(54),i=a(456),p=a(231),m=a(11),d=a(90),f=a(463),b=a(69),y=a(29),h=a(14),j=a.n(h),E=a(17);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var v=j.a.mark(N),x=j.a.mark(P),S=j.a.mark(R),k=j.a.mark(D),w="LOGIN",T="LOGOUT",C="GET_LOGIN_STATUS",I="SET_LOGIN_STATUS",_="SET_LOGIN_ERRORS",M="CLEAR_LOGIN_ERRORS";function N(){var e,t,a,n;return j.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(E.c)(w);case 3:return e=r.sent,t=e.payload,r.next=7,fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 7:return a=r.sent,r.next=10,a.json();case 10:if(!(n=r.sent).loginStatus){r.next=17;break}return r.next=14,Object(E.b)({type:I,payload:{loginStatus:n.loginStatus,availableObjects:n.availableObjects,availableForUploads:n.availableForUploads,username:n.username}});case 14:"admin"===n.loginStatus&&t.history.push("/admin"),r.next=19;break;case 17:return r.next=19,Object(E.b)({type:_,payload:{loginStatus:!1,loginErrorMessage:n.message}});case 19:r.next=0;break;case 21:case"end":return r.stop()}},v)}function P(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(E.c)(T);case 3:return e.next=5,fetch("/logout");case 5:return e.next=7,Object(E.b)({type:I,payload:{loginStatus:!1}});case 7:e.next=0;break;case 9:case"end":return e.stop()}},x)}function R(){var e,t;return j.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(E.c)(C);case 3:return a.next=5,fetch("/get_login_status");case 5:return e=a.sent,a.next=8,e.json();case 8:if(!(t=a.sent).loginStatus){a.next=14;break}return a.next=12,Object(E.b)({type:I,payload:{loginStatus:t.loginStatus,availableObjects:t.availableObjects,availableForUploads:t.availableForUploads,username:t.username}});case 12:a.next=16;break;case 14:return a.next=16,Object(E.b)({type:I,payload:{loginStatus:!1}});case 16:a.next=0;break;case 18:case"end":return a.stop()}},S)}function D(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.a)([N(),P(),R()]);case 2:case"end":return e.stop()}},k)}function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var z=Object(s.f)(Object(y.b)(function(e){return U({},e)},{login:function(e){return{type:w,payload:e}}})(function(e){Object(n.useEffect)(function(){e.form.validateFields()},[]);var t,a=e.form,c=a.getFieldDecorator,o=a.getFieldsError,l=a.getFieldError,s=a.isFieldTouched,u=s("username")&&l("username"),y=s("password")&&l("password");return r.a.createElement("div",null,r.a.createElement("h1",null,"Report Consolidation App"),r.a.createElement("div",{className:"login-container"},r.a.createElement(i.a,{className:"login-form",onSubmit:function(t){t.preventDefault(),e.form.validateFields(function(t,a){t||(console.log("Received values of form: ",a),e.login(U({},a,{history:e.history})))})}},r.a.createElement(i.a.Item,{validateStatus:u?"error":"",help:u||""},c("username",{rules:[{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0412\u0430\u0448 \u043b\u043e\u0433\u0438\u043d!"}]})(r.a.createElement(p.a,{prefix:r.a.createElement(m.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u041b\u043e\u0433\u0438\u043d"}))),r.a.createElement(i.a.Item,{validateStatus:y?"error":"",help:y||""},c("password",{rules:[{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"}]})(r.a.createElement(p.a,{prefix:r.a.createElement(m.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"}))),r.a.createElement(i.a.Item,null,c("remember",{valuePropName:"checked",initialValue:!0})(r.a.createElement(d.a,null,"\u0417\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u043c\u0435\u043d\u044f"))),e.auth.loginErrorMessage?r.a.createElement(f.a,{message:e.auth.loginErrorMessage,className:"login-msg",type:"error"}):null,r.a.createElement(i.a.Item,null,r.a.createElement(b.a,{type:"primary",htmlType:"submit",className:"login-form-button",disabled:(t=o(),Object.keys(t).some(function(e){return t[e]}))},"\u0412\u043e\u0439\u0442\u0438")))))})),F=i.a.create({name:"horizontal_login"})(z),L=a(218),B=a(21),J=a(67),G=a(460),H=a(454),Y=a(459),W=a(452);function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var K=j.a.mark(ke),X=j.a.mark(we),$=j.a.mark(Te),Q=j.a.mark(Ce),Z=j.a.mark(Ie),ee=j.a.mark(_e),te=j.a.mark(Me),ae=j.a.mark(Ne),ne=j.a.mark(Pe),re=j.a.mark(Re),ce=j.a.mark(Ae),oe=a(358),le="GET_CURRENT_OBJECT_INFO",se="SET_CURRENT_OBJECT_INFO",ue="CLEAR_CURRENT_OBJECT_INFO",ie="GET_CURRENT_MONTH_INFO",pe="GET_CURRENT_MONTH_INFO",me="CHANGE_SHARE",de="GET_PROJECT_STRUCTURE",fe="SET_PROJECT_STRUCTURE",be="ADD_NEW_OBJECT",ye="DELETE_OBJECT",he="DELETE_REPORT",je="CREATE_EXCEL",Ee="GET_HISTORY",ge="SET_HISTORY",Oe="GET_CHART_INFO",ve="SET_CHART_INFO",xe=function(e){return{type:ie,payload:e}},Se=function(){return{type:de}};function ke(){var e,t,a,n;return j.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(E.c)(le);case 3:return e=r.sent,t=e.payload,r.next=7,fetch("/get_current_object_info",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 7:return a=r.sent,r.next=10,a.json();case 10:return n=r.sent,r.next=13,Object(E.b)({type:se,payload:n});case 13:r.next=0;break;case 15:case"end":return r.stop()}},K)}function we(){var e,t,a,n;return j.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(E.c)(ie);case 3:return e=r.sent,t=e.payload,r.next=7,fetch("/get_current_month_info",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 7:return a=r.sent,r.next=10,a.json();case 10:return n=r.sent,r.next=13,Object(E.b)({type:pe,payload:n});case 13:r.next=0;break;case 15:case"end":return r.stop()}},X)}function Te(){var e,t;return j.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(E.c)(me);case 3:return e=a.sent,t=e.payload,a.next=7,fetch("/change_share",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 7:return a.next=9,Object(E.b)({type:ie,payload:{month:t.month,availableObjects:t.availableObjects}});case 9:a.next=0;break;case 11:case"end":return a.stop()}},$)}function Ce(){var e,t;return j.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(E.c)(de);case 3:return a.next=5,fetch("/get_project_structure");case 5:return e=a.sent,a.next=8,e.json();case 8:return t=a.sent,a.next=11,Object(E.b)({type:fe,payload:t});case 11:a.next=0;break;case 13:case"end":return a.stop()}},Q)}function Ie(){var e,t;return j.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(E.c)(be);case 3:return e=a.sent,t=e.payload,a.next=7,fetch("/add_new_object",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 7:return a.next=9,Object(E.b)({type:de});case 9:a.next=0;break;case 11:case"end":return a.stop()}},Z)}function _e(){var e,t;return j.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(E.c)(ye);case 3:return e=a.sent,t=e.payload,a.next=7,fetch("/delete_object",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 7:return a.next=9,Object(E.b)({type:de});case 9:a.next=0;break;case 11:case"end":return a.stop()}},ee)}function Me(){var e,t;return j.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(E.c)(he);case 3:return e=a.sent,t=e.payload,a.next=7,fetch("/delete_report",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 7:return a.next=9,Object(E.b)({type:le,payload:t});case 9:a.next=0;break;case 11:case"end":return a.stop()}},te)}function Ne(){var e,t,a,n;return j.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(E.c)(je);case 3:return e=r.sent,t=e.payload,r.next=7,fetch("/create_excel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 7:return a=r.sent,r.next=10,a.blob();case 10:n=r.sent,oe.saveAs(n,"report.xlsx"),console.log("response.blob(): ",n),r.next=0;break;case 15:case"end":return r.stop()}},ae)}function Pe(){var e,t,a,n;return j.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(E.c)(Ee);case 3:return e=r.sent,t=e.payload,r.next=7,fetch("/get_history",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 7:return a=r.sent,r.next=10,a.json();case 10:return n=r.sent,r.next=13,Object(E.b)({type:ge,payload:n});case 13:r.next=0;break;case 15:case"end":return r.stop()}},ne)}function Re(){var e,t,a,n;return j.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(E.c)(Oe);case 3:return e=r.sent,t=e.payload,r.next=7,fetch("/get_chart_info",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 7:return a=r.sent,r.next=10,a.json();case 10:return n=r.sent,r.next=13,Object(E.b)({type:ve,payload:n});case 13:r.next=0;break;case 15:case"end":return r.stop()}},re)}var De={currentObjectInfo:"",currentMonthInfo:"",projectStructure:"",history:"",chartInfo:{}};function Ae(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.a)([ke(),we(),Te(),Ce(),Ie(),_e(),Me(),Ne(),Pe(),Re()]);case 2:case"end":return e.stop()}},ce)}var Ue=J.a.Option,ze=Object(y.b)(function(e){return e},{getCurrentObjectInfo:function(e){return{type:le,payload:e}},deleteReport:function(e){return{type:he,payload:e}},clearCurrentObjectInfo:function(){return{type:ue}}})(function(e){var t=Object(n.useState)(""),a=Object(B.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(new Date(Date.now()).getFullYear()),s=Object(B.a)(l,2),u=s[0],i=s[1],p=Object(n.useState)(""),d=Object(B.a)(p,2),f=d[0],y=d[1];function h(e){var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type||"application/vnd.ms-excel";return t||G.a.error("\u041d\u0435 \u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0430"),t}var E=[{title:"\u041c\u0435\u0441\u044f\u0446",dataIndex:"month",key:"month"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",key:"status",render:function(e){return e?r.a.createElement("div",null,r.a.createElement(m.a,{style:{color:"limegreen",fontSize:26},type:"check-circle"})):r.a.createElement("div",null,r.a.createElement(m.a,{style:{fontSize:26},type:"clock-circle"}))}},{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435",dataIndex:"action",key:"action",render:function(t){return"upload"===t.type?r.a.createElement("div",null,r.a.createElement(H.a,{beforeUpload:h,action:"/file",data:{project:c.split(":")[0],object:c.split(":")[1],month:t.key,username:e.auth.username},onChange:function(){var t=Object(L.a)(j.a.mark(function t(a){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.file.status,"done"===a.file.status?(G.a.success("\u0424\u0430\u0439\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d"),e.getCurrentObjectInfo({project:c.split(":")[0],object:c.split(":")[1],year:u})):"error"===a.file.status&&(console.log(a),G.a.error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0432\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b."),G.a.error(a.file.response.message));case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},r.a.createElement(b.a,null,r.a.createElement(m.a,{type:"upload"})," \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b"))):"delete"===t.type?r.a.createElement(b.a,{type:"danger",ghost:!0,onClick:function(){e.deleteReport({project:c.split(":")[0],object:c.split(":")[1],year:u,month:t.key,username:e.auth.username})}},r.a.createElement(m.a,{type:"delete"})," \u0423\u0434\u0430\u043b\u0438\u0442\u044c"):void 0}}];return Object(n.useEffect)(function(){c&&e.getCurrentObjectInfo({project:c.split(":")[0],object:c.split(":")[1],year:u})},[c,u]),Object(n.useEffect)(function(){y(e.data.currentObjectInfo)},[e.data.currentObjectInfo]),Object(n.useEffect)(function(){return function(){e.clearCurrentObjectInfo()}},[]),r.a.createElement("div",null,r.a.createElement("h1",{className:"page-title"},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043e\u0442\u0447\u0435\u0442\u0430"),r.a.createElement("span",{className:"input-label"},"\u041f\u0440\u043e\u0435\u043a\u0442:"),r.a.createElement(J.a,{value:c,style:{width:200,marginRight:50},onChange:function(e){y(""),console.log("selected ".concat(e)),o(e)}},e.auth.availableForUploads?e.auth.availableForUploads.map(function(e){return r.a.createElement(Ue,{value:e.project+":"+e.object,key:e.project+e.object},e.project+(e.object?": "+e.object:""))}):null),r.a.createElement("span",{className:"input-label"},"\u0413\u043e\u0434:"),r.a.createElement(Y.a,{min:2019,max:2029,defaultValue:u,onChange:function(e){y(""),console.log("changed",e),i(e)}}),e.data.currentObjectInfo?r.a.createElement(W.a,{className:"upload-table",pagination:!1,showHeader:!0,columns:E,style:{textAlign:"center"},dataSource:f}):null)}),Fe=a(172);function Le(e){var t=+e.slice(-2);return 1===t?(+e.slice(0,4)-1).toString()+"12":e.slice(0,4)+("0"+(t-1).toString()).slice(-2)}var Be=function(e){var t=e.currentMonth,a=e.setCurrentMonth,n=e.currentMonthName;return r.a.createElement("div",null,r.a.createElement("div",{style:{fontSize:24}},r.a.createElement(b.a,{className:"arrowsBnt",onClick:function(){a(Le(t))}},r.a.createElement(m.a,{type:"left"})),r.a.createElement("span",{style:{width:170,display:"inline-block"}}," ",n," "),r.a.createElement(b.a,{className:"arrowsBnt",onClick:function(){a(function(e){var t=+e.slice(-2);return 12===t?(+e.slice(0,4)+1).toString()+"01":e.slice(0,4)+("0"+(t+1).toString()).slice(-2)}(t))}},r.a.createElement(m.a,{type:"right"}))))};function Je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Ge=Object(y.b)(function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Je(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Je(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e)},{getCurrentMonthInfo:xe,changeShare:function(e){return{type:me,payload:e}}})(function(e){var t=new Date(Date.now());console.log(t.getMonth());var a=t.getFullYear().toString()+(0+(t.getMonth()+1).toString()).slice(-2),c=Object(n.useState)(Le(a)),o=Object(B.a)(c,2),l=o[0],s=o[1],u=[{title:"\u041f\u0440\u043e\u0435\u043a\u0442/\u041e\u0431\u044a\u0435\u043a\u0442",dataIndex:"projectName",key:"projectName"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",key:"status",render:function(e){return e?r.a.createElement("div",null,r.a.createElement(m.a,{style:{color:"limegreen",fontSize:22},type:"check-circle"})):r.a.createElement("div",null,r.a.createElement(m.a,{style:{fontSize:22},type:"clock-circle"}))}},{title:"\u0414\u043e\u043b\u0435\u0432\u043e\u0435 \u0443\u0447\u0430\u0441\u0442\u0438\u0435",dataIndex:"share",key:"share",render:function(t){if(t)return r.a.createElement("div",null,"admin"===e.auth.loginStatus?r.a.createElement(Y.a,{defaultValue:t.value,min:0,max:100,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},onPressEnter:function(a){+a.currentTarget.value.slice(0,-1)<=100&&e.changeShare({object:t.objectName,project:t.projectName,month:l,value:+a.currentTarget.value.slice(0,-1),availableObjects:e.auth.availableObjects.map(function(e){return e.project+":"+e.object})})}}):r.a.createElement("span",null,t.value,"%"))}},{title:"\u0414\u0430\u0442\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438",dataIndex:"uploadDate",key:"uploadDate"}];return Object(n.useEffect)(function(){l&&e.auth.availableObjects.length&&e.getCurrentMonthInfo({month:l,availableObjects:e.auth.availableObjects.map(function(e){return e.project+":"+e.object})})},[l]),Object(n.useEffect)(function(){l&&e.auth.availableObjects.length&&e.getCurrentMonthInfo({month:l,availableObjects:e.auth.availableObjects.map(function(e){return e.project+":"+e.object})})},[]),r.a.createElement("div",null,e.data.currentMonthInfo?r.a.createElement(Be,{currentMonth:l,setCurrentMonth:s,currentMonthName:e.data.currentMonthInfo.name}):null,e.data.currentMonthInfo?r.a.createElement(W.a,{style:{marginTop:20},pagination:!1,showHeader:!0,columns:u,size:"small",dataSource:e.data.currentMonthInfo.data}):null)}),He=a(457),Ye=a(458),We=a(461),Ve=a(93),qe=a(50),Ke=a(462),Xe=He.a.TreeNode,$e=Ye.a.Title,Qe=Object(y.b)(function(e){return e},{getProjectStructure:Se,addNewObject:function(e){return{type:be,payload:e}},deleteObject:function(e){return{type:ye,payload:e}}})(function(e){var t=Object(n.useState)(""),a=Object(B.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),s=Object(B.a)(l,2),u=s[0],i=s[1];return Object(n.useEffect)(function(){e.getProjectStructure()},[]),r.a.createElement("div",null,r.a.createElement(Ve.a,{gutter:8,style:{margin:20}},r.a.createElement(qe.a,{span:8,style:{textAlign:"left"}},r.a.createElement($e,{level:3},"\u041e\u0431\u0437\u043e\u0440 \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432"),e.data.projectStructure?r.a.createElement(He.a,null,function(){var t=[];for(var a in e.data.projectStructure.tree){var n;(n=e.data.projectStructure.tree[a].map(function(e){if(e)return r.a.createElement(Xe,{key:e,title:e})}))?t.push(r.a.createElement(Xe,{title:a,key:a},n)):t.push(r.a.createElement(Xe,{title:a,key:a}))}return t}()):null),r.a.createElement(qe.a,{span:16,style:{textAlign:"left",maxWidth:"600px"}},r.a.createElement($e,{level:3},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442/\u043e\u0431\u044a\u0435\u043a\u0442"),r.a.createElement("div",null,r.a.createElement(Ke.a,{style:{width:210,marginRight:20,marginBottom:10},dataSource:e.data.projectStructure.projectsList,placeholder:"\u041f\u0440\u043e\u0435\u043a\u0442",filterOption:function(e,t){return-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase())},onChange:function(e){o(e)},value:c}),r.a.createElement(Ke.a,{style:{width:210,marginRight:30,marginBottom:10},placeholder:"\u041e\u0431\u044a\u0435\u043a\u0442",filterOption:function(e,t){return-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase())},onChange:function(e){i(e)},value:u}),r.a.createElement(b.a,{onClick:function(){c&&(e.addNewObject({project:c,object:u}),o(""),i(""))}},r.a.createElement(m.a,{type:"plus"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")),r.a.createElement($e,{level:3,style:{marginTop:50}},"\u0412\u0441\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u044b"),e.data.projectStructure?r.a.createElement(We.a,null,function(){if(e.data.projectStructure)return e.data.projectStructure.list.map(function(t){return r.a.createElement(We.a.Item,{actions:[r.a.createElement("span",{style:{color:"red"},onClick:function(){e.deleteObject({object:t.object,project:t.project})}},r.a.createElement(m.a,{type:"delete"})," \u0443\u0434\u0430\u043b\u0438\u0442\u044c")]}," ",r.a.createElement("span",{style:{fontWeight:600}}," ",t.project," ")," ",t.object," ")})}()):null)))});function Ze(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var et=j.a.mark(ft),tt=j.a.mark(bt),at=j.a.mark(yt),nt=j.a.mark(ht),rt=j.a.mark(jt),ct=j.a.mark(Et),ot=j.a.mark(gt),lt="GET_ALL_USERS",st="SET_ALL_USERS",ut="CHANGE_AVAILABLE_OBJECTS",it="CHANGE_AVAILABLE_FOR_UPLOADS",pt="RESET_PASSWORD",mt="NEW_USER",dt="DELETE_USER";function ft(){var e,t;return j.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(E.c)(lt);case 3:return a.next=5,fetch("/get_all_users");case 5:return e=a.sent,a.next=8,e.json();case 8:return t=a.sent,a.next=11,Object(E.b)({type:st,payload:t});case 11:a.next=0;break;case 13:case"end":return a.stop()}},et)}function bt(){var e,t;return j.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(E.c)(ut);case 3:return e=a.sent,t=e.payload,a.next=7,fetch("/change_available_projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 7:return a.next=9,Object(E.b)({type:lt});case 9:return a.next=11,Object(E.b)({type:"GET_LOGIN_STATUS"});case 11:a.next=0;break;case 13:case"end":return a.stop()}},tt)}function yt(){var e,t;return j.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(E.c)(it);case 3:return e=a.sent,t=e.payload,a.next=7,fetch("/change_available_for_uploads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 7:return a.next=9,Object(E.b)({type:lt});case 9:return a.next=11,Object(E.b)({type:"GET_LOGIN_STATUS"});case 11:a.next=0;break;case 13:case"end":return a.stop()}},at)}function ht(){var e,t;return j.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(E.c)(pt);case 3:return e=a.sent,t=e.payload,a.next=7,fetch("/reset_password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 7:a.next=0;break;case 9:case"end":return a.stop()}},nt)}function jt(){var e,t;return j.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(E.c)(mt);case 3:return e=a.sent,t=e.payload,a.next=7,fetch("/new_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 7:return a.next=9,Object(E.b)({type:lt});case 9:a.next=0;break;case 11:case"end":return a.stop()}},rt)}function Et(){var e,t;return j.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(E.c)(dt);case 3:return e=a.sent,t=e.payload,a.next=7,fetch("/delete_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 7:return a.next=9,Object(E.b)({type:lt});case 9:a.next=0;break;case 11:case"end":return a.stop()}},ct)}function gt(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.a)([ft(),bt(),ht(),jt(),Et(),yt()]);case 2:case"end":return e.stop()}},ot)}var Ot=a(453),vt=a(455),xt=Ot.a.TreeNode,St=Ye.a.Title,kt=J.a.Option,wt=Object(y.b)(function(e){return e},{getAllUsers:function(){return{type:lt}},getProjectStructure:Se,changeAvailableProjects:function(e){return{type:ut,payload:e}},changeAvailableForUploads:function(e){return{type:it,payload:e}},resetPassword:function(e){return{type:pt,payload:e}},newUser:function(e){return{type:mt,payload:e}},deleteUser:function(e){return{type:dt,payload:e}}})(function(e){var t=Object(n.useState)(""),a=Object(B.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)("user"),s=Object(B.a)(l,2),u=s[0],i=s[1],d=Object(n.useState)([]),f=Object(B.a)(d,2),y=f[0],h=f[1],j=function(){var t=[];return e.data.projectStructure&&e.data.projectStructure.list.forEach(function(e){t.push(r.a.createElement(xt,{value:e.project+":"+e.object,title:e.project+" "+e.object,key:e.project+e.object}))}),t};return Object(n.useEffect)(function(){e.getAllUsers(),e.getProjectStructure()},[]),r.a.createElement("div",null,r.a.createElement(St,{level:3,style:{marginTop:50}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),r.a.createElement(vt.a,{key:"newUser",style:{marginBottom:30,backgroundColor:"#fafafa",borderRadius:"5px",textAlign:"left"}},r.a.createElement(Ve.a,null,r.a.createElement(qe.a,{lg:6,style:{padding:10}},r.a.createElement("p",null,"\u041b\u043e\u0433\u0438\u043d:"),r.a.createElement(p.a,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d",value:c,onChange:function(e){o(e.target.value)}})),r.a.createElement(qe.a,{lg:5,style:{padding:10}},r.a.createElement("p",null,"\u0422\u0438\u043f:"),r.a.createElement(J.a,{value:u,style:{width:"100%"},onChange:function(e){i(e)}},r.a.createElement(kt,{value:"user"},"User (\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043e\u0442\u0447\u0435\u0442\u043e\u0432)"),r.a.createElement(kt,{value:"admin"},"Admin (\u041f\u043e\u043b\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f)"),r.a.createElement(kt,{value:"manager"},"Manager (\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f)"))),r.a.createElement(qe.a,{lg:9,style:{padding:10}},r.a.createElement("p",null,"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u044b/\u043e\u0431\u044a\u0435\u043a\u0442\u044b:"),r.a.createElement(Ot.a,{showSearch:!0,multiple:!0,style:{width:"100%"},value:y,onChange:function(e){h(e)}},j())),r.a.createElement(qe.a,{lg:4,style:{padding:10,textAlign:"center"}},r.a.createElement(b.a,{block:!0,style:{marginTop:33},onClick:function(){e.newUser({role:u,username:c,password:"",availableObjects:y.map(function(e){return{project:e.split(":")[0],object:e.split(":")[1]?e.split(":")[1]:""}}),availableForUploads:y.map(function(e){return{project:e.split(":")[0],object:e.split(":")[1]?e.split(":")[1]:""}})}),o(""),i("user"),h([])}}," ",r.a.createElement(m.a,{type:"plus"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c ")))),r.a.createElement(St,{level:3},"\u0421\u043f\u0438\u0441\u043e\u043a \u0432\u0441\u0435\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"),e.users.usersList&&e.data.projectStructure?function(){var t=e.users.usersList,a=[];return t.forEach(function(t){var n=t.availableObjects.map(function(e){return e.project+":"+e.object}),c=t.availableForUploads.map(function(e){return e.project+":"+e.object});a.push(r.a.createElement(vt.a,{key:t.username,style:{marginBottom:30,backgroundColor:"#fafafa",borderRadius:"5px",textAlign:"left"}},r.a.createElement(Ve.a,null,r.a.createElement(qe.a,{lg:10,style:{padding:10}},r.a.createElement("p",null,"\u041b\u043e\u0433\u0438\u043d:"),r.a.createElement(St,{level:4},t.username)),r.a.createElement(qe.a,{lg:4,style:{padding:10}},r.a.createElement("p",null,"\u0422\u0438\u043f:"),r.a.createElement(St,{level:4},t.role)),r.a.createElement(qe.a,{lg:5,style:{padding:10,textAlign:"center",marginTop:20}},r.a.createElement(b.a,{type:"primary",onClick:function(){e.resetPassword({username:t.username}),G.a.info("\u041f\u0430\u0440\u043e\u043b\u044c \u0441\u0431\u0440\u043e\u0448\u0435\u043d!")},ghost:!0,style:{margin:"10px auto"}}," \u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c ")),r.a.createElement(qe.a,{lg:5,style:{padding:10,textAlign:"center",marginTop:20}},r.a.createElement(b.a,{type:"danger",ghost:!0,style:{margin:"10px auto"},onClick:function(){e.deleteUser({username:t.username})}}," \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ")),r.a.createElement(qe.a,{lg:12,style:{padding:10}},r.a.createElement("p",null,"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u044b \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430:"),r.a.createElement(Ot.a,{showSearch:!0,multiple:!0,style:{width:"100%"},defaultValue:n,onChange:function(a){e.changeAvailableProjects({username:t.username,availableProjects:a})}},j())),r.a.createElement(qe.a,{lg:12,style:{padding:10}},r.a.createElement("p",null,"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u044b \u0434\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438:"),r.a.createElement(Ot.a,{showSearch:!0,multiple:!0,style:{width:"100%"},defaultValue:c,onChange:function(a){e.changeAvailableForUploads({username:t.username,availableForUploads:a})}},j())))))}),a}():null)}),Tt=a(451),Ct=Ye.a.Title,It=Object(y.b)(function(e){return e},{getCurrentMonthInfo:xe})(function(e){var t=new Date(Date.now()),a=t.getFullYear().toString()+(0+(t.getMonth()+1).toString()).slice(-2),c=Object(n.useState)(Le(a)),o=Object(B.a)(c,2),l=o[0],s=o[1],u=Object(n.useState)(!0),i=Object(B.a)(u,2),p=i[0],d=i[1],f=Object(n.useState)(!0),y=Object(B.a)(f,2),h=y[0],j=y[1],E=Object(n.useState)([]),g=Object(B.a)(E,2),O=g[0],v=g[1],x=Object(n.useState)([]),S=Object(B.a)(x,2),k=S[0],w=S[1],T=[{name:"\u0414\u043e\u0445\u043e\u0434",code:"code1000"},{name:"\u041e\u0431\u0449\u0435\u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0440\u0430\u0441\u0441\u0445\u043e\u0434\u044b",code:"code2002"},{name:"\u0424\u041e\u0422 \u0438 \u043d\u0430\u043b\u043e\u0433\u0438 \u043d\u0430 \u0437\u043f",code:"code2001"},{name:"\u0410\u0440\u0435\u043d\u0434\u0430 \u043e\u0444\u0438\u0441\u0430",code:"code2003"},{name:"\u0414\u0440\u0443\u0433\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0440\u0430\u0441\u0445\u043e\u0434\u044b",code:"code2005"},{name:"EBITDA",code:"code6000"},{name:"EBITDA margin",code:"code7000"},{name:"\u0410\u043c\u043e\u0440\u0442\u0438\u0437\u0430\u0446\u0438\u044f / \u0412\u043e\u0437\u0432\u0440\u0430\u0442 \u0438\u043d\u0432\u0435\u0441\u0442\u0438\u0446\u0438\u0438",code:"code2006"},{name:"% \u043f\u043e \u0437\u0430\u0435\u043c\u043d\u044b\u043c \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c",code:"code2004"},{name:"\u041e\u043f\u043b\u0430\u0442\u0430 \u043d\u0430\u043b\u043e\u0433\u043e\u0432",code:"code2007"},{name:"\u0427\u0438\u0441\u0442\u0430\u044f \u043f\u0440\u0438\u0431\u044b\u043b\u044c",code:"code3000"},{name:"\u0414\u043e\u043b\u044f \u0443\u0447\u0430\u0441\u0442\u0438\u044f",code:"code4000"},{name:"\u0427\u0438\u0441\u0442\u0430\u044f \u043f\u0440\u0438\u0431\u044b\u043b\u044c \u043d\u0430 \u0434\u043e\u043b\u044e",code:"code5000"}];function C(){var t=[],a=e.auth.availableObjects.sort(_);t.push({title:"\u041f\u043e\u0437\u0438\u0446\u0438\u0438",dataIndex:"position",key:"position",fixed:"left",width:270}),p?a.forEach(function(e){t.find(function(t){return t.key===e.project})||t.push({title:e.project,dataIndex:e.project,key:e.project,align:"right"})}):a.forEach(function(e){t.push({title:e.project+(e.object?": "+e.object:""),dataIndex:e.project+":"+e.object,key:e.project+":"+e.object,align:"right",width:150})}),t.push({title:"\u0412\u0441\u0435\u0433\u043e",dataIndex:"total",key:"total",fixed:"right",width:100,align:"right"}),v(t)}function I(e){if(e){var t=Math.round(e).toString();return t.slice(0,-9)+" "+t.slice(-9,-6)+" "+t.slice(-6,-3)+" "+t.slice(-3)}return""}function _(e,t){return e.project>t.project?1:e.project<t.project?-1:e.object>t.object?1:e.object<t.object?-1:0}return console.log("props.data.currentMonthInfo: ",e.data.currentMonthInfo),console.log("data: ",k),Object(n.useEffect)(function(){l&&e.getCurrentMonthInfo({month:l,availableObjects:e.auth.availableObjects.map(function(e){return e.project+":"+e.object})}),w([])},[l]),Object(n.useEffect)(function(){O&&e.data.currentMonthInfo.data&&function(){var t=[];for(var a in T.forEach(function(a){var n={total:0};O.forEach(function(t,r){n.key=a.code,"position"===t.dataIndex?n.position=a.name:"total"!==t.dataIndex&&(p?(n[t.dataIndex]=0,e.data.currentMonthInfo.data.forEach(function(e){e.status&&e.share.projectName===t.dataIndex&&(h&&"code5000"===a.code?(n[t.dataIndex]+=e.data.code3000*e.data.code4000,n.total+=e.data.code3000*e.data.code4000):"code4000"!==a.code&&"code6000"!==a.code&&"code7000"!==a.code&&(n[t.dataIndex]+=e.data[a.code],n.total+=e.data[a.code]))})):e.data.currentMonthInfo.data.forEach(function(e){t.title===e.key&&e.status&&(h&&"code5000"===a.code?(n[t.dataIndex]=e.data.code3000*e.data.code4000,n.total+=e.data.code3000*e.data.code4000):"code4000"!==a.code&&"code6000"!==a.code&&"code7000"!==a.code&&(n[t.dataIndex]=e.data[a.code],n.total+=e.data[a.code]))}))}),(h||"code4000"!==a.code&&"code5000"!==a.code)&&t.push(n)}),t[0])"position"!==a&&"key"!==a&&(t[0][a]?(t[5][a]=Math.round(100*(t[0][a]-t[1][a]-t[2][a]-t[3][a]-t[4][a]))/100,t[6][a]=Math.round(t[5][a]/t[0][a]*1e4)/100+"%"):(t[5][a]="",t[6][a]=""));if(h){t[11].total="";var n=function(a){if("position"!==a&&"key"!==a&&"total"!==a)if(p){var n=0,r=0;e.data.currentMonthInfo.data.forEach(function(e){e.status&&e.share.projectName===a&&(console.log(e),n+=Math.abs(e.data.code3000),r+=Math.abs(e.data.code3000*e.data.code4000))}),t[11][a]=n&&r?Math.round(r/n*1e4)/100+"%":""}else t[10][a]?t[11][a]=Math.round(t[12][a]/t[10][a]*1e4)/100+"%":t[11][a]=""};for(var r in t[0])n(r)}t.forEach(function(e){if("code4000"!==e.key&&"code7000"!==e.key)for(var t in e)"position"!==t&&"key"!==t&&(e[t]=I(e[t]))}),w(t)}()},[O,e.data.currentMonthInfo.data,h]),Object(n.useEffect)(function(){l&&e.getCurrentMonthInfo({month:l,availableObjects:e.auth.availableObjects.map(function(e){return e.project+":"+e.object})}),C()},[]),Object(n.useEffect)(function(){e.getCurrentMonthInfo({month:l,availableObjects:e.auth.availableObjects.map(function(e){return e.project+":"+e.object})}),C()},[p]),r.a.createElement("div",null,r.a.createElement(Ct,{level:3},"\u041a\u043e\u043d\u0441\u043e\u043b\u0438\u0434\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043e\u0442\u0447\u0435\u0442"),r.a.createElement(Ve.a,null,r.a.createElement(qe.a,{lg:8,style:{marginTop:10}},r.a.createElement("p",null,r.a.createElement(Tt.a,{defaultChecked:!0,onChange:function(e){d(e)}})," \u0413\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0430\u043c "),r.a.createElement("p",null,r.a.createElement(Tt.a,{defaultChecked:!0,onChange:function(e){j(e)}})," \u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c \u0434\u043e\u043b\u044e \u0443\u0447\u0430\u0441\u0442\u0438\u044f ")),r.a.createElement(qe.a,{lg:8,style:{marginTop:15}},e.data.currentMonthInfo?r.a.createElement(Be,{currentMonth:l,setCurrentMonth:s,currentMonthName:e.data.currentMonthInfo.name}):null),r.a.createElement(qe.a,{lg:8,style:{marginTop:25}},r.a.createElement(b.a,{onClick:function(){e.setTab("excelReport")}}," ",r.a.createElement(m.a,{type:"file-excel"}),"\u0421\u043e\u0437\u0434\u0430\u0442\u044c excel"))),r.a.createElement(Ve.a,{style:{marginTop:10}},r.a.createElement(W.a,{className:"consolidate-report",columns:O,dataSource:k,pagination:!1,scroll:{x:150*O.length,y:0},size:"small"})))}),_t=Ye.a.Title,Mt=Ot.a.TreeNode,Nt=[{key:"01",name:"\u042f\u043d\u0432\u0430\u0440\u044c"},{key:"02",name:"\u0424\u0435\u0432\u0440\u0430\u043b\u044c"},{key:"03",name:"\u041c\u0430\u0440\u0442"},{key:"04",name:"\u0410\u043f\u0440\u0435\u043b\u044c"},{key:"05",name:"\u041c\u0430\u0439"},{key:"06",name:"\u0418\u044e\u043d\u044c"},{key:"07",name:"\u0418\u044e\u043b\u044c"},{key:"08",name:"\u0410\u0432\u0433\u0443\u0441\u0442"},{key:"09",name:"\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c"},{key:"10",name:"\u041e\u043a\u0442\u044f\u0431\u0440\u044c"},{key:"11",name:"\u041d\u043e\u044f\u0431\u0440\u044c"},{key:"12",name:"\u0414\u0435\u043a\u0430\u0431\u0440\u044c"}],Pt=Object(y.b)(function(e){return e},{createExcel:function(e){return{type:je,payload:e}}})(function(e){var t=new Date(Date.now()),a=t.getFullYear().toString()+(0+(t.getMonth()+1).toString()).slice(-2),c=Object(n.useState)(a),o=Object(B.a)(c,2),l=o[0],s=o[1],u=Object(n.useState)(a),i=Object(B.a)(u,2),p=i[0],d=i[1],f=Object(n.useState)(!0),y=Object(B.a)(f,2),h=y[0],j=y[1],E=Object(n.useState)(!0),g=Object(B.a)(E,2),O=g[0],v=g[1],x=Object(n.useState)(!0),S=Object(B.a)(x,2),k=S[0],w=S[1],T=Object(n.useState)(e.auth.availableObjects.map(function(e){return e.project+":"+e.object})),C=Object(B.a)(T,2),I=C[0],_=C[1];return r.a.createElement("div",null,r.a.createElement(Ve.a,null,r.a.createElement(qe.a,{lg:6,style:{marginTop:10}},r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement(b.a,{onClick:function(){e.setTab("report")}},r.a.createElement(m.a,{type:"arrow-left"})," \u041d\u0430\u0437\u0430\u0434"))),r.a.createElement(qe.a,{lg:12,style:{marginTop:10}},r.a.createElement(_t,{level:3},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043e\u0442\u0447\u0435\u0442 \u0432 excel")),r.a.createElement(qe.a,{lg:6}," ")),r.a.createElement(Ve.a,{style:{marginTop:30}},r.a.createElement(qe.a,{lg:8},r.a.createElement(_t,{level:4},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),r.a.createElement("div",{style:{marginTop:30,paddingLeft:20,textAlign:"left"}},r.a.createElement("p",null,r.a.createElement(Tt.a,{defaultChecked:!0,onChange:function(e){j(e)}})," \u0413\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0430\u043c "),r.a.createElement("p",null,r.a.createElement(Tt.a,{defaultChecked:!0,onChange:function(e){v(e)}})," \u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c \u0434\u043e\u043b\u044e \u0443\u0447\u0430\u0441\u0442\u0438\u044f "),r.a.createElement("p",null,r.a.createElement(Tt.a,{defaultChecked:!0,onChange:function(e){w(e)}})," \u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u044b "),k?null:r.a.createElement(qe.a,{style:{marginTop:10,fontSize:18}},r.a.createElement(Ot.a,{showSearch:!0,multiple:!0,style:{maxWidth:600},value:I,onChange:function(e){_(e)}},function(){var t=[];return e.auth.availableObjects.forEach(function(e){t.push(r.a.createElement(Mt,{value:e.project+":"+e.object,title:e.project+" "+e.object,key:e.project+e.object}))}),t}())))),r.a.createElement(qe.a,{lg:8},r.a.createElement(_t,{level:4},"\u041f\u0435\u0440\u0438\u043e\u0434"),r.a.createElement("p",{style:{fontSize:18,marginBottom:0,marginTop:20}},"\u041f\u0435\u0440\u0432\u044b\u0439 \u043c\u0435\u0441\u044f\u0446: "),r.a.createElement(Be,{currentMonth:l,setCurrentMonth:function(e){+e<=+p?s(e):(s(e),d(e))},currentMonthName:Nt[l.slice(4)-1].name+" "+l.slice(0,4)}),r.a.createElement("p",{style:{fontSize:18,marginBottom:0,marginTop:20}},"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043c\u0435\u0441\u044f\u0446: "),r.a.createElement(Be,{currentMonth:p,setCurrentMonth:function(e){+l<=+e&&d(e)},currentMonthName:Nt[p.slice(4)-1].name+" "+p.slice(0,4)})),r.a.createElement(qe.a,{lg:8},r.a.createElement(_t,{level:4},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"),r.a.createElement("div",{style:{marginTop:30,fontSize:18}},r.a.createElement(b.a,{size:"large",onClick:function(){e.createExcel({byProject:h,projects:I,share:O,firstMonth:l,lastMonth:p})}}," ",r.a.createElement(m.a,{type:"cloud-download"}),"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u0444\u0430\u0439\u043b")))),r.a.createElement(Ve.a,null,r.a.createElement(qe.a,{style:{marginTop:15,fontSize:18}})),r.a.createElement(Ve.a,null,r.a.createElement(qe.a,{style:{marginTop:50,fontSize:18}})))}),Rt=Ye.a.Title,Dt=[{key:"01",name:"\u042f\u043d\u0432\u0430\u0440\u044c"},{key:"02",name:"\u0424\u0435\u0432\u0440\u0430\u043b\u044c"},{key:"03",name:"\u041c\u0430\u0440\u0442"},{key:"04",name:"\u0410\u043f\u0440\u0435\u043b\u044c"},{key:"05",name:"\u041c\u0430\u0439"},{key:"06",name:"\u0418\u044e\u043d\u044c"},{key:"07",name:"\u0418\u044e\u043b\u044c"},{key:"08",name:"\u0410\u0432\u0433\u0443\u0441\u0442"},{key:"09",name:"\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c"},{key:"10",name:"\u041e\u043a\u0442\u044f\u0431\u0440\u044c"},{key:"11",name:"\u041d\u043e\u044f\u0431\u0440\u044c"},{key:"12",name:"\u0414\u0435\u043a\u0430\u0431\u0440\u044c"}],At=Object(y.b)(function(e){return e},{getHistory:function(e){return{type:Ee,payload:e}}})(function(e){var t=Object(n.useState)(new Date(Date.now()).getFullYear().toString()+("0"+(new Date(Date.now()).getMonth()+1).toString()).slice(-2)),a=Object(B.a)(t,2),c=a[0],o=a[1],l=[{title:"\u0412\u0440\u0435\u043c\u044f - \u0414\u0430\u0442\u0430",dataIndex:"date",key:"date",render:function(e){var t=new Date(e),a=t.getMinutes();return+a<10&&(a="0"+a),t.getHours()+":"+a+" - "+t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()}},{title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",dataIndex:"username",key:"username"},{title:"\u041e\u0442\u0447\u0435\u0442",dataIndex:"report",key:"report"},{title:"\u0421\u043e\u0431\u044b\u0442\u0438\u0435",dataIndex:"action",key:"action",render:function(e){switch(e){case"success upload":return r.a.createElement("div",null,r.a.createElement(m.a,{type:"check",style:{color:"green"}}),"  - \u0423\u0434\u0430\u0447\u043d\u0430\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 ");case"failed upload":return r.a.createElement("div",null,r.a.createElement(m.a,{type:"warning",style:{color:"orange"}}),"  - \u041d\u0435\u0443\u0434\u0430\u0447\u043d\u0430\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 ");case"delete":return r.a.createElement("div",null,r.a.createElement(m.a,{type:"close",style:{color:"red"}}),"  - \u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043e\u0442\u0447\u0435\u0442\u0430 ")}}}];return Object(n.useEffect)(function(){e.getHistory({period:c})},[]),Object(n.useEffect)(function(){e.getHistory({period:c})},[c]),r.a.createElement("div",null,r.a.createElement(Rt,{level:3},"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043e\u043a"),r.a.createElement(Be,{currentMonth:c,setCurrentMonth:o,currentMonthName:Dt[+c.slice(4)-1].name+" "+c.slice(0,4)}),e.data.history?r.a.createElement(W.a,{style:{marginTop:10},columns:l,dataSource:e.data.history,pagination:!1,size:"small"}):null)}),Ut=a(229),zt=Ye.a.Title,Ft=Ot.a.TreeNode,Lt=[{key:"01",name:"\u042f\u043d\u0432\u0430\u0440\u044c"},{key:"02",name:"\u0424\u0435\u0432\u0440\u0430\u043b\u044c"},{key:"03",name:"\u041c\u0430\u0440\u0442"},{key:"04",name:"\u0410\u043f\u0440\u0435\u043b\u044c"},{key:"05",name:"\u041c\u0430\u0439"},{key:"06",name:"\u0418\u044e\u043d\u044c"},{key:"07",name:"\u0418\u044e\u043b\u044c"},{key:"08",name:"\u0410\u0432\u0433\u0443\u0441\u0442"},{key:"09",name:"\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c"},{key:"10",name:"\u041e\u043a\u0442\u044f\u0431\u0440\u044c"},{key:"11",name:"\u041d\u043e\u044f\u0431\u0440\u044c"},{key:"12",name:"\u0414\u0435\u043a\u0430\u0431\u0440\u044c"}],Bt=Object(y.b)(function(e){return e},{getChartInfo:function(e){return{type:Oe,payload:e}}})(function(e){var t=new Date(Date.now()),a=Object(n.useState)(t.getFullYear().toString()+"01"),c=Object(B.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)(t.getFullYear().toString()+"12"),u=Object(B.a)(s,2),i=u[0],p=u[1],m=Object(n.useState)(!0),d=Object(B.a)(m,2),f=d[0],b=d[1],y=Object(n.useState)(!0),h=Object(B.a)(y,2),j=h[0],E=h[1],g=Object(n.useState)(!0),O=Object(B.a)(g,2),v=O[0],x=O[1],S=Object(n.useState)(e.auth.availableObjects.map(function(e){return e.project+":"+e.object})),k=Object(B.a)(S,2),w=k[0],T=k[1];return Object(n.useEffect)(function(){e.getChartInfo({byProject:f,projects:w,share:j,firstMonth:o,lastMonth:i})},[]),Object(n.useEffect)(function(){e.getChartInfo({byProject:f,projects:w,share:j,firstMonth:o,lastMonth:i})},[f,w,j,o,i]),r.a.createElement("div",null,r.a.createElement(zt,{level:3,style:{marginTop:10}},"\u0413\u0440\u0430\u0444\u0438\u043a\u0438"),r.a.createElement(Ve.a,{style:{marginTop:10,marginBottom:30}},r.a.createElement(qe.a,{lg:8},r.a.createElement("div",{style:{marginTop:60,paddingLeft:20,textAlign:"left"}},r.a.createElement("p",null,r.a.createElement(Tt.a,{defaultChecked:!0,onChange:function(e){b(e)}})," \u0413\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0430\u043c "),r.a.createElement("p",null,r.a.createElement(Tt.a,{defaultChecked:!0,onChange:function(e){E(e)}})," \u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c \u0434\u043e\u043b\u044e \u0443\u0447\u0430\u0441\u0442\u0438\u044f "),r.a.createElement("p",null,r.a.createElement(Tt.a,{defaultChecked:!0,onChange:function(e){x(e)}})," \u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u044b "),v?null:r.a.createElement(qe.a,{style:{marginTop:10,fontSize:18}},r.a.createElement(Ot.a,{showSearch:!0,multiple:!0,style:{maxWidth:600},value:w,onChange:function(e){T(e)}},function(){var t=[];return e.auth.availableObjects.forEach(function(e){t.push(r.a.createElement(Ft,{value:e.project+":"+e.object,title:e.project+" "+e.object,key:e.project+e.object}))}),t}())))),r.a.createElement(qe.a,{lg:8},r.a.createElement("p",{style:{fontSize:18,marginBottom:0,marginTop:20}},"\u041f\u0435\u0440\u0432\u044b\u0439 \u043c\u0435\u0441\u044f\u0446: "),r.a.createElement(Be,{currentMonth:o,setCurrentMonth:function(e){+e<=+i?l(e):(l(e),p(e))},currentMonthName:Lt[o.slice(4)-1].name+" "+o.slice(0,4)}),r.a.createElement("p",{style:{fontSize:18,marginBottom:0,marginTop:20}},"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043c\u0435\u0441\u044f\u0446: "),r.a.createElement(Be,{currentMonth:i,setCurrentMonth:function(e){+o<=+e&&p(e)},currentMonthName:Lt[i.slice(4)-1].name+" "+i.slice(0,4)}))),r.a.createElement(Ut.a,{data:e.data.chartInfo}))}),Jt=function(e){var t=Object(n.useState)("uploadsStatus"),a=Object(B.a)(t,2),c=a[0],o=a[1];return r.a.createElement("div",null,r.a.createElement(Fe.a,{onClick:function(e){o(e.key)},selectedKeys:[c],mode:"horizontal",style:{marginBottom:"50px"}},r.a.createElement(Fe.a.Item,{key:"uploadsStatus",style:{fontSize:"18px"}},r.a.createElement(m.a,{type:"file-done",style:{fontSize:"20px"}}),"\u0421\u0442\u0430\u0442\u0443\u0441\u044b \u0437\u0430\u0433\u0440\u0443\u0437\u043e\u043a"),r.a.createElement(Fe.a.Item,{key:"projectsMap",style:{fontSize:"18px"}},r.a.createElement(m.a,{type:"deployment-unit",style:{fontSize:"20px"}}),"\u041f\u0440\u043e\u0435\u043a\u0442\u044b"),r.a.createElement(Fe.a.Item,{key:"usersMap",style:{fontSize:"18px"}},r.a.createElement(m.a,{type:"team",style:{fontSize:"20px"}}),"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"),r.a.createElement(Fe.a.Item,{key:"report",style:{fontSize:"18px"}},r.a.createElement(m.a,{type:"table",style:{fontSize:"20px"}}),"\u041e\u0442\u0447\u0435\u0442"),r.a.createElement(Fe.a.Item,{key:"graphs",style:{fontSize:"18px"}},r.a.createElement(m.a,{type:"bar-chart",style:{fontSize:"20px"}}),"\u0413\u0440\u0430\u0444\u0438\u043a\u0438"),r.a.createElement(Fe.a.Item,{key:"history",style:{fontSize:"18px"}},r.a.createElement(m.a,{type:"history",style:{fontSize:"20px"}}),"\u0418\u0441\u0442\u043e\u0440\u0438\u044f"),r.a.createElement(Fe.a.Item,{key:"upload",style:{fontSize:"18px"}},r.a.createElement(m.a,{type:"cloud-upload",style:{fontSize:"20px"}}),"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430")),function(){switch(c){case"uploadsStatus":return r.a.createElement(Ge,null);case"projectsMap":return r.a.createElement(Qe,null);case"usersMap":return r.a.createElement(wt,null);case"report":return r.a.createElement(It,{setTab:o});case"excelReport":return r.a.createElement(Pt,{setTab:o});case"graphs":return r.a.createElement(Bt,null);case"history":return r.a.createElement(At,null);case"upload":return r.a.createElement(ze,null)}}())},Gt=a(65),Ht=a(232),Yt=j.a.mark(Vt),Wt=Object(Gt.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loginStatus:!1,loginErrorMessage:"",availableObjects:"",availableForUploads:"",username:""},t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case I:return O({},e,{loginStatus:n.loginStatus,loginErrorMessage:"",availableObjects:n.availableObjects,availableForUploads:n.availableForUploads,username:n.username});case _:return O({},e,{loginStatus:!1,loginErrorMessage:n.loginErrorMessage});case M:return O({},e,{loginStatus:!1,loginErrorMessage:""});default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case se:return q({},e,{currentObjectInfo:n});case ue:return q({},e,{currentObjectInfo:""});case pe:return q({},e,{currentMonthInfo:n});case fe:return q({},e,{projectStructure:n});case ge:return q({},e,{history:n});case ve:return q({},e,{chartInfo:n});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{usersList:""},t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case st:return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ze(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ze(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{usersList:n});default:return e}}});function Vt(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.a)([D(),Ae(),gt()]);case 2:case"end":return e.stop()}},Yt)}var qt=Object(Ht.a)(),Kt=Object(Gt.e)(Wt,Object(Gt.a)(qt));qt.run(Vt);var Xt=Kt,$t=Object(s.f)(Object(y.b)(function(e){return e},{getLoginStatus:function(){return{type:C}},logout:function(){return{type:T}}})(function(e){return Object(n.useEffect)(function(){e.getLoginStatus()},[]),Object(n.useEffect)(function(){!function(){if(e.auth.loginStatus)switch(e.auth.loginStatus){case"user":e.history.push("/upload");break;case"admin":e.history.push("/admin");break;case"manager":e.history.push("/manager")}else e.history.push("/login")}()},[e.auth.loginStatus]),r.a.createElement("div",{className:"header"},e.auth.loginStatus?r.a.createElement(b.a,{onClick:function(){e.history.push("/login"),e.logout()}},"\u0412\u044b\u0439\u0442\u0438"):null)})),Qt=function(e){var t=Object(n.useState)("uploadsStatus"),a=Object(B.a)(t,2),c=a[0],o=a[1];return r.a.createElement("div",null,r.a.createElement(Fe.a,{onClick:function(e){o(e.key)},selectedKeys:[c],mode:"horizontal",style:{marginBottom:"50px"}},r.a.createElement(Fe.a.Item,{key:"uploadsStatus",style:{fontSize:"18px"}},r.a.createElement(m.a,{type:"file-done",style:{fontSize:"20px"}}),"\u0421\u0442\u0430\u0442\u0443\u0441\u044b \u0437\u0430\u0433\u0440\u0443\u0437\u043e\u043a"),r.a.createElement(Fe.a.Item,{key:"report",style:{fontSize:"18px"}},r.a.createElement(m.a,{type:"table",style:{fontSize:"20px"}}),"\u041e\u0442\u0447\u0435\u0442"),r.a.createElement(Fe.a.Item,{key:"graphs",style:{fontSize:"18px"}},r.a.createElement(m.a,{type:"bar-chart",style:{fontSize:"20px"}}),"\u0413\u0440\u0430\u0444\u0438\u043a\u0438"),r.a.createElement(Fe.a.Item,{key:"upload",style:{fontSize:"18px"}},r.a.createElement(m.a,{type:"cloud-upload",style:{fontSize:"20px"}}),"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430")),function(){switch(c){case"uploadsStatus":return r.a.createElement(Ge,null);case"report":return r.a.createElement(It,{setTab:o});case"excelReport":return r.a.createElement(Pt,{setTab:o});case"graphs":return r.a.createElement(Bt,null);case"upload":return r.a.createElement(ze,null)}}())};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(l.a,null,r.a.createElement(function(){return r.a.createElement(y.a,{store:Xt},r.a.createElement(l.a,null,r.a.createElement("div",{className:"App"},r.a.createElement($t,null),r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/login",exact:!0,component:F}),r.a.createElement(s.a,{path:"/upload",exact:!0,component:ze}),r.a.createElement(s.a,{path:"/admin",exact:!0,component:Jt}),r.a.createElement(s.a,{path:"/manager",exact:!0,component:Qt})))))},null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[234,1,2]]]);
//# sourceMappingURL=main.aea21f9d.chunk.js.map